<!Doctype html>
<div class="dashboard-container">
    <h1>Admin Dashboard</h1>

    <!--  Section: Buses -->
    <section class="card">
        <h2>Buses</h2>
        @if (buses.length > 0){
        <table>
            <thead>
                <tr>
                    <th>Bus Number</th>
                    <th>Capacity</th>
                    <th>Route</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                @for (bus of buses; track bus.id) {
                <tr>
                    <td>{{ bus.number }}</td>
                    <td>{{ bus.capacity }}</td>
                    <td>{{ bus.routeName }}</td>
                    <td>{{ bus.status }}</td>
                </tr>
                }
            </tbody>
        </table>
        } @else {
        <p>No buses available</p>
        }
    </section>

    <!--  Section: Routes -->
    <section class="card">
        <h2>Routes</h2>
        @if (routes.length > 0){
        <table>
            <thead>
                <tr>
                    <th>Route Name</th>
                    <th>Bus Number</th>
                    <th>Number of Stops</th>
                    <th>Start Time</th>
                    <th>End Time</th>
                </tr>
            </thead>
            <tbody>
                @for (route of routes; track route.id) {
                <tr>
                    <td>{{ route.routeName }}</td>
                    <td>{{ route.busNumber }}</td>
                    <td>{{ route.stops.length }}</td>
                    <td>{{ route.startTime }}</td>
                    <td>{{ route.endTime }}</td>
                </tr>
                }
            </tbody>
        </table>
        } @else {
        <p>No routes available</p>
        }
    </section>

    <!--  Section: Tracking -->
    <section class="card">
        <h2>Bus Tracking</h2>
        @if (tracking.length > 0) {
        <ul>
            @for (t of tracking; track t.busId) {
            <li>
                Bus ID: {{ t.busId }} | Location: ({{ t.latitude }}, {{ t.longitude }}) | Heading: {{ t.heading }}Â° | Time: {{ t.timestamp | date:'short' }}
            </li>
            }
        </ul>
        } @else {
        <p>No tracking data available</p>
        }
    </section>

    <!--  Section: Contacts -->
    <section class="card">
        <h2>Messages</h2>
        @if (contacts.length > 0) {
        <ul>
            @for (c of contacts; track c.id) {
            <li>
                <strong>{{ c.name }}</strong> ({{ c.email }}) - {{ c.subject }}<br> {{ c.message }}
            </li>
            }
        </ul>
        } @else {
        <p>No messages available</p>
        }
    </section>
</div>

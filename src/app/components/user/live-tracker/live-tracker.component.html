<div class="tracker-container">
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="search-box">
      <input 
        type="text" 
        placeholder="ุงุจุญุซ ุนู ุจุงุต..." 
        [(ngModel)]="searchQuery"
      />
      <img src="../../../../assets/icons/search.png" alt="ุจุญุซ" class="search-icon" />
    </div>

    <!-- Statistics -->
    <div class="stats-container">
      <div class="stat-item">
        <span class="stat-label">ุงูุจุงุตุงุช ุงููุดุทุฉ:</span>
        <span class="stat-value">{{ activeBusesWithLocationCount }}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">ุฅุฌูุงูู ุงูุจุงุตุงุช:</span>
        <span class="stat-value">{{ buses.length }}</span>
      </div>
    </div>

    @if (isLoading) {
    <div class="loading-message">ุฌุงุฑู ุชุญููู ุงูุจุงุตุงุช...</div>
    } @else if (errorMessage) {
    <div class="error-message">{{ errorMessage }}</div>
    } @else {
    <div class="bus-list">
      @if (filteredBuses.length === 0) {
      <div class="no-buses">ูุง ุชูุฌุฏ ุจุงุตุงุช</div>
      } @else {
      <div 
        class="bus-card" 
        *ngFor="let bus of filteredBuses" 
        [class.selected]="selectedBus?.id === bus.id"
        (click)="onBusSelect(bus)">
        <p class="bus-title">ุจุงุต {{ bus.number }}</p>
        <p class="bus-desc">{{ getBusDescription(bus) }}</p>
        @if (hasLocation(bus)) {
        <span class="location-badge" [class.active]="bus.status === 'active'">
          {{ bus.status === 'active' ? '๐ ูููุน ุญู' : '๐ ูููุน' }}
        </span>
        }
      </div>
      }
    </div>
    }
  </div>

  <!-- Map area -->
  <div class="map-container">
    <div id="busMap"></div>
    <div class="map-controls">
      <button class="refresh-btn" (click)="refreshData()">๐ ุชุญุฏูุซ</button>
    </div>
  </div>
</div>